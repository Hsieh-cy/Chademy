<%- include('../parts/html-head') %>
<style>
    .row {

        margin: auto;
    }

    body {
        background-color: #EFF0F0;
    }

    h3 {
        margin: auto;
        margin-top: 40px;
        margin-bottom: 20px;
    }

    table.table tr th {
        background-color: #5F6B6B !Important;

        color: white !Important;

    }

    .my-trash-i {
        color: #5F6B6B;
        cursor: pointer;
    }

    .my-edit-i {
        color: #C77334;
        cursor: pointer;
    }


    .form-group input {
        width: 400px;
    }

    .form-group textarea {
        width: 400px;
    }

    .redstars {
        color: red;
    }

    .pagination>li>a {
        background-color: white;
        color: darkgray;
    }

    .pagination>li>a:focus,
    .pagination>li>a:hover,
    .pagination>li>span:focus,
    .pagination>li>span:hover {
        color: #5a5a5a;
        background-color: #eee;
        border-color: #ddd;
    }

    .pagination>.active>a {
        color: white;
        background-color: #C77334 !Important;
        border: solid 1px #ddd !Important;
    }

    .pagination>.active>a:hover {
        background-color: #C77334 !Important;
        border: solid 1px #5A4181;
    }

    /* .choose {
        margin: 10px 0px 10px 0px !Important;
        border-radius: 0px;

    } */

    .wrap {
        background-position: center;
        background-size: cover;
        background-repeat: no-repeat;
        width: 150px;
    }

    .wrap img {
        width: 100%;
        height: 150px;
        object-fit: cover
    }
</style>
<div class="contianer">
    <%- include('../parts/navbar') %>
</div>




<div class="container">

    <div class="row justify-content-center">
        <div class="col-12"></div>
        <table class="table">
            <thead class="thead-dark">
                <tr>

                    <th scope="col">刪除</th>
                    <th scope="col">編輯</th>

                    <th scope="col">#</th>
                    <th scope="col">產品圖</th>
                    <th scope="col">產品編號</th>
                    <th scope="col">產品名稱</th>
                    <th scope="col">產品描述</th>
                    <th scope="col">產品類別</th>
                    <th scope="col">顏色</th>
                    <th scope="col">椅身材質</th>
                    <th scope="col">椅墊材質</th>
                    <th scope="col">設計師</th>
                    <th scope="col">產品價格</th>
                    <th scope="col">Hashtag</th>
                    <th scope="col">上架日期</th>
                    <th scope="col">下架日期</th>
                    <th scope="col">最後修改時間</th>
                </tr>
            </thead>
            <tbody>
                <% for(let i of rows){ %>
                <tr>
                    <td><i class="fas fa-trash my-trash-i" data-sid="<%= i.sid %>"></i></td>
                    <td>
                        <a href="/man_product/edit/<%= i.sid %>">
                            <i class="fas fa-edit my-edit-i"></i>
                        </a>

                    </td>
                    <td><%= i.sid %></td>
                    <td>
                        <div class="wrap">
                            <img src="/img/<%=i.photo %>" alt="" width="150px">
                        </div>
                    </td>
                    <td><%= i.product_no %></td>
                    <td><%= i.product_name %></td>
                    <td><%= i.description %></td>
                    <td><%= i.category %></td>
                    <td><%= i.color %></td>
                    <td><%= i.chair_body %></td>
                    <td><%= i.chair_seat %></td>
                    <td><%= i.designer %></td>
                    <td><%= i.price %></td>
                    <td><%= i.hashtag %></td>
                    <td><%= i.on_shelf_time %></td>
                    <td><%= i.off_shelf_time %></td>
                    <td><%= i.last_edit_time %></td>

                </tr>
                <% } %>
            </tbody>
        </table>
    </div>
</div>

</div>


<%- include('../parts/scripts') %>
<script>

    $('table tbody .fa-trash').on('click', function () {
        const sid = $(this).attr('data-sid');
        // const sid = $(this).data('sid');

        fetch('/man_product/del/' + sid, {
            method: 'DELETE',
        })
            .then(r => r.json())
            .then(obj => {
                console.log(obj);
                location.reload();
            })

    });

</script>
<%- include('../parts/html-foot') %>